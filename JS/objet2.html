<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>objet2</title>
</head>
<body>
    <script>
    //     Exercice 2 : Gestion de la collection de films
    // Enoncé :
    // Crée une classe Film avec les propriétés suivantes :
    // titre : le titre du film (une chaîne de caractères).
    // réalisateur : le réalisateur du film (une chaîne de caractères).
    // annéeSortie : l'année de sortie du film (un nombre).
    // genre : le genre du film (une chaîne de caractères).

    // Ensuite, crée une autre classe BibliothèqueDeFilms qui contient un tableau de films. Cette classe doit avoir les méthodes suivantes :
    // ajouterFilm(film) : ajoute un film à la collection.
    // rechercherParGenre(genre) : retourne tous les films du genre donné.
    // afficherTousLesFilms() : affiche tous les films avec leurs détails.
    //    

    class Film {
        constructor(titre, realisateur, anneeSortie, genre) {
        this.titre = titre;
        this.realisateur = realisateur;
        this.anneeSortie = anneeSortie;
        this.genre = genre;
        }

        getDescription() {
        console.log("Le film '" + this.titre + "' est un film de " + this.genre + ".Il a été réalisé par " + this.realisateur + " en " + this.anneeSortie + ".");
        }

    }

    class BibliothèqueDeFilms {
        constructor(){
            this.films = new Array();

        }

        ajouterFilm(film) {
            this.films.push(film);

            return this;
        }

        rechercherParGenre(genre) {
            // let ret = [];
            // for (let i = 0; i < this.films; i++) {
            //     if (this.films[i].genre === genre) {
            //         ret.push(this.films[i]);
            //     }
            // }
            // return ret;

            return this.films.filter((film) => film.genre === genre);

        }

        afficherTousLesFilms() {
            // Object.keys(this.films).forEach(function(titre, realisateur, anneeSortie, genre){
            //     console.log("titre:", titre);
            //     console.log("realisateur:", realisateur);
            //     console.log("anneeSortie:", anneeSortie);
            //     console.log("genre:", genre);

            for (let i = 0; i < this.films.length; i++) {
                this.films[i].getDescription();
                };

            // this.films.forEach(film => film.getDescription());

        }
    }

    let alien = new Film("alien", "Ridley Scott", 1979, "horror");
    let alien2 = new Film("aliens", "James Cameron", 1986, "horror");
    let alien3 = new Film("alien 3", "David Fincher", 1992, "horror");
    let alien4 = new Film("alien, la résurrection", "Jean-Pierre Jeunet", 1997, "horror");
    let bladeRunner = new Film("Blade Runner", "Ridley Scott", 1982, "science-fiction");
    let terminator = new Film("Terminator", "James Cameron", 1984, "science-iction");
    let terminator2 = new Film("Terminator 2", "James Cameron", 1991, "science-fiction");

    let library = new BibliothèqueDeFilms();
        // .ajouterFilm(new Film("alien", "Ridley Scott", "1979", "horror"))
        // .ajouterFilm(new Film("aliens", "James Cameron", "1986", "horror"))
        // .ajouterFilm(new Film("alien 3", "David Fincher", "1992", "horror"))
        // .ajouterFilm(new Film("alien, la résurrection", "Jean-Pierre Jeunet", "1997", "horror"))
        // .ajouterFilm(new Film("Blade Runner", "Ridley Scott", "1982", "science-fiction"))
        // .ajouterFilm(new Film("Terminator", "James Cameron", "1984", "science-iction"))
        // .ajouterFilm(new Film("Terminator 2", "James Cameron", "1991", "science-fiction"));
        library
        .ajouterFilm(alien)
        .ajouterFilm(alien2)
        .ajouterFilm(alien3)
        .ajouterFilm(alien4)
        .ajouterFilm(bladeRunner)
        .ajouterFilm(terminator)
        .ajouterFilm(terminator2);

    
    console.table(library.rechercherParGenre('horror'));

    console.table(library.rechercherParGenre('science-fiction'));
    

    library.afficherTousLesFilms();


    // class Movie {
    //         constructor(title, director, year, genre) {
    //             this.title = title;
    //             this.director = director;
    //             this.year = year;
    //             this.genre = genre;

    //         }

    //         getDescription() {
    //             console.log("Le film '" + this.title + "' est un film de " + this.genre + ".Il a été réalisé par " + this.director + " en " + this.year + ".");
    //         }

    //     }

        // class MovieLibrary {
        //     constructor() {
        //         this.movies = [];

        //         // On aurait pu utiliser une structure Set si on décide qu'on aura max 1 exemplaire de chaque film
        //         // this.movies = new Set();    
        //         // Ou une structure Map qui permettrait de stocker le film (clé) et la quantité (valeur)
        //         // this.movies = new Map();
        //     }

        //     addMovie(movie) {
        //         this.movies.push(movie);

        //         return this;
        //     }

        //     searchByGenre(genre) {
        //         let moviesByGenre = [];
        //         for (let i = 0; i < this.movies.length; i++) {
        //             if (this.movies[i].genre === genre) {
        //                 moviesByGenre.push(this.movies[i]);
        //             }
        //         }

        //         return moviesByGenre;
        //     }

        //     searchByGenreV2(genre) {
        //         return this.movies.filter(function (movie) {
        //             return movie.genre === genre;
        //         });
        //         // return this.movies.filter((movie) => movie.genre === genre);
        //     }

        //     displayMovies() {
        //         for (let i = 0; i < this.movies.length; i++) {
        //             this.movies[i].getDescription();
        //         }
        //     }
        // }

        // let alien = new Movie("alien", "Ridley Scott", "1979", "horror");
        // let alien2 = new Movie("aliens", "James Cameron", "1986", "horror");
        // let alien3 = new Movie("alien 3", "David Fincher", "1992", "horror");
        // let alien4 = new Movie("alien, la résurrection", "Jean-Pierre Jeunet", "1997", "horror");
        // let bladeRunner = new Movie("Blade Runner", "Ridley Scott", "1982", "science-fiction");
        // let terminator = new Movie("Terminator", "James Cameron", "1984", "science-iction");
        // let terminator2 = new Movie("Terminator 2", "James Cameron", "1991", "science-fiction");

        // let library = new MovieLibrary();


        // //On peut utiliser les setters "fluent" car on return "this" dans la méthde addMovie
        // library
        //     .addMovie(new Movie("alien", "Ridley Scott", "1979", "horror"))
        //     .addMovie(new Movie("aliens", "James Cameron", "1986", "horror"))
        //     .addMovie(new Movie("alien 3", "David Fincher", "1992", "horror"))
        //     .addMovie(new Movie("alien, la résurrection", "Jean-Pierre Jeunet", "1997", "horror"))
        //     .addMovie(new Movie("Blade Runner", "Ridley Scott", "1982", "science-fiction"))
        //     .addMovie(new Movie("Terminator", "James Cameron", "1984", "science-iction"))
        //     .addMovie(new Movie("Terminator 2", "James Cameron", "1991", "science-fiction"));


        // // console.table(library.searchByGenre('horror'));
        // console.table(library.searchByGenreV2('horror'));

        // // console.table(library.searchByGenre('science-fiction'));
        // console.table(library.searchByGenreV2('science-fiction'));

        // library.displayMovies();


     </script>
</body>
</html>